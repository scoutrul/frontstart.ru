import { Topic } from '../../../../types';

export const RENDERING_BEGINNER_TOPICS: Topic[] = [
  {
    id: 'frameworks-rendering-spa',
    title: 'SPA',
    difficulty: 'beginner',
    description: 'SPA (Single Page Application) — это приложение, которое загружается один раз и обновляет контент без перезагрузки страницы. Вместо загрузки нового HTML с сервера при каждой навигации, JavaScript обновляет DOM динамически, создавая ощущение "нативного" приложения.\n\nSPA решает проблему медленных переходов между страницами: после первой загрузки навигация происходит мгновенно, так как не требуется запрос нового HTML с сервера. Это создаёт плавный пользовательский опыт, особенно для интерактивных приложений.\n\nНо SPA имеет недостатки: медленная первая загрузка (нужно загрузить весь JavaScript), сложности с SEO (поисковики не видят контент, который рендерится через JavaScript), больше JavaScript (увеличивает размер бандла). Эти проблемы решаются через SSR, SSG и другие стратегии рендеринга.\n\nВ 2026 SPA остаётся популярным для интерактивных приложений (админки, дашборды), где важна скорость взаимодействия, а не SEO. Но для контентных сайтов используются гибридные подходы (SSR, SSG) для решения проблем SPA.',
    keyPoints: [
      'SPA: одна HTML-страница, контент обновляется через JavaScript',
      'Навигация без перезагрузки страницы, плавный UX',
      'Недостатки: медленная первая загрузка, сложности с SEO, больше JavaScript',
      'Подходит для интерактивных приложений (админки, дашборды)',
      'Проблемы решаются через SSR, SSG и другие стратегии',
      'Остаётся популярным для интерактивных приложений в 2026'
    ],
    funFact: 'Первое SPA было создано в 2003 году компанией Google — это был Gmail. До этого все считали, что веб-приложения не могут конкурировать с десктопными по удобству. Gmail доказал, что веб может быть таким же быстрым и удобным, как нативное приложение.',
    tags: ['frameworks', 'rendering', 'spa', 'csr', 'basics', 'fundamentals', 'core'],
    examples: [
      {
        title: 'SPA: навигация без перезагрузки',
        code: `// SPA: одна HTML-страница
// index.html (загружается один раз)
<!DOCTYPE html>
<html>
<head>
  <title>SPA App</title>
</head>
<body>
  <div id="app"></div>
  <script src="app.js"></script>
</body>
</html>

// app.js: обновление контента через JavaScript
function navigate(path) {
  // Обновляем контент без перезагрузки
  const content = getContentForPath(path);
  document.getElementById('app').innerHTML = content;
  
  // Меняем URL без перезагрузки (History API)
  history.pushState({}, '', path);
}

// Пользователь кликает по ссылке
// → Контент обновляется мгновенно
// → URL меняется
// → Страница НЕ перезагружается`
      },
      {
        title: 'Проблема первой загрузки',
        code: `// SPA: проблема первой загрузки
// 1. Загружается HTML (пустой)
<!DOCTYPE html>
<html>
<body>
  <div id="app"></div> <!-- Пустой -->
  <script src="app.js"></script> <!-- Большой файл -->
</body>
</html>

// 2. Загружается JavaScript (может быть несколько МБ)
// 3. JavaScript выполняется
// 4. Запрашиваются данные с сервера
// 5. Рендерится интерфейс

// Проблема: пользователь видит пустую страницу
// Решение: SSR, SSG для предварительного рендеринга`
      },
      {
        title: 'Проблема SEO',
        code: `// SPA: проблема SEO
// Поисковик запрашивает HTML
<!DOCTYPE html>
<html>
<body>
  <div id="app"></div> <!-- Пустой -->
  <script src="app.js"></script>
</body>
</html>

// Поисковик не видит контент
// Контент рендерится через JavaScript после загрузки
// Поисковик может не дождаться выполнения JavaScript

// Решение: SSR для предварительного рендеринга HTML
// Сервер рендерит HTML с контентом, поисковик видит его`
      }
    ],
    relatedTopics: ['frameworks-rendering-csr', 'frameworks-rendering-ssr'],
    isFrontendEssential: true
  },
  {
    id: 'frameworks-rendering-csr',
    title: 'CSR',
    difficulty: 'beginner',
    description: 'CSR (Client-Side Rendering) — это рендеринг интерфейса в браузере. Сервер отправляет пустой HTML и JavaScript, браузер загружает JavaScript, выполняет его, и JavaScript рендерит интерфейс. Это основа SPA: весь рендеринг происходит на клиенте.\n\nCSR даёт быструю навигацию: после первой загрузки переходы между страницами мгновенные, так как не требуется запрос нового HTML. Это создаёт ощущение "нативного" приложения, где всё работает плавно.\n\nНо CSR имеет стоимость: пустая страница при первой загрузке (пока загружается и выполняется JavaScript), долгая интерактивность (Time to Interactive большой), сложности с SEO (поисковики не видят контент). Эти проблемы решаются через SSR, SSG и другие стратегии.\n\nВ 2026 CSR остаётся популярным для интерактивных приложений, где важна скорость взаимодействия. Но для контентных сайтов используются гибридные подходы: SSR для первой загрузки, CSR для навигации.',
    keyPoints: [
      'CSR: рендеринг в браузере, сервер отправляет пустой HTML и JavaScript',
      'Быстрая навигация после первой загрузки',
      'Стоимость: пустая страница, долгая интерактивность, сложности с SEO',
      'Подходит для интерактивных приложений',
      'Проблемы решаются через SSR, SSG',
      'Остаётся популярным для интерактивных приложений в 2026'
    ],
    funFact: 'CSR стал популярным с появлением React в 2013 году. До этого большинство веб-приложений использовали SSR (Server-Side Rendering), где сервер рендерил HTML. React показал, что можно рендерить всё на клиенте, что дало больше интерактивности.',
    tags: ['frameworks', 'rendering', 'csr', 'client-side', 'basics', 'fundamentals', 'core'],
    examples: [
      {
        title: 'CSR: рендеринг в браузере',
        code: `// CSR: сервер отправляет пустой HTML
// index.html
<!DOCTYPE html>
<html>
<body>
  <div id="app"></div> <!-- Пустой -->
  <script src="app.js"></script>
</body>
</html>

// app.js: рендеринг в браузере
function App() {
  return (
    <div>
      <h1>Привет</h1>
      <p>Это рендерится в браузере</p>
    </div>
  );
}

ReactDOM.render(<App />, document.getElementById('app'));

// Процесс:
// 1. Браузер загружает HTML (пустой)
// 2. Браузер загружает JavaScript
// 3. JavaScript выполняется
// 4. JavaScript рендерит интерфейс
// 5. Пользователь видит контент`
      },
      {
        title: 'Стоимость CSR',
        code: `// CSR: стоимость первой загрузки
// Время до First Contentful Paint (FCP):

// 0ms: Запрос HTML
// 100ms: HTML загружен (пустой)
// 500ms: JavaScript загружен
// 800ms: JavaScript выполнен
// 1000ms: Данные запрошены
// 1200ms: Данные получены
// 1300ms: Интерфейс отрендерен (FCP)

// Проблема: пользователь видит пустую страницу 1.3 секунды
// Решение: SSR для предварительного рендеринга HTML`
      },
      {
        title: 'CSR vs SSR',
        code: `// CSR: рендеринг в браузере
// Сервер: пустой HTML
// Браузер: рендерит интерфейс

// Преимущества:
// - Быстрая навигация после первой загрузки
// - Меньше нагрузка на сервер
// - Проще кэширование

// Недостатки:
// - Медленная первая загрузка
// - Плохое SEO
// - Больше JavaScript

// SSR: рендеринг на сервере
// Сервер: HTML с контентом
// Браузер: показывает готовый HTML

// Преимущества:
// - Быстрая первая загрузка
// - Отличное SEO
// - Меньше JavaScript

// Недостатки:
// - Медленная навигация (нужен запрос к серверу)
// - Больше нагрузка на сервер`
      }
    ],
    relatedTopics: ['frameworks-rendering-spa', 'frameworks-rendering-ssr'],
    isFrontendEssential: true
  },
  {
    id: 'frameworks-rendering-csr-cost',
    title: 'Стоимость CSR',
    difficulty: 'beginner',
    description: 'CSR имеет стоимость: пустая страница при первой загрузке, долгая интерактивность, сложности с SEO. Пока загружается и выполняется JavaScript, пользователь видит пустую страницу. Это создаёт плохой пользовательский опыт, особенно на медленных соединениях.\n\nTime to Interactive (TTI) — это метрика, которая измеряет время до полной интерактивности страницы. В CSR TTI большой, так как нужно загрузить весь JavaScript, выполнить его, запросить данные, отрендерить интерфейс. Это может занять несколько секунд на медленных соединениях.\n\nПроблема SEO возникает потому, что поисковики могут не дождаться выполнения JavaScript и не увидеть контент. Это особенно проблематично для контентных сайтов, где SEO критично.\n\nВ 2026 эти проблемы решаются через гибридные подходы: SSR для первой загрузки (быстрый FCP, хорошее SEO), CSR для навигации (быстрые переходы). Понимание стоимости CSR критично для выбора правильной стратегии рендеринга.',
    keyPoints: [
      'Стоимость CSR: пустая страница, долгая интерактивность, сложности с SEO',
      'Пока загружается JavaScript, пользователь видит пустую страницу',
      'Time to Interactive большой: нужно загрузить и выполнить весь JavaScript',
      'Проблема SEO: поисковики могут не увидеть контент',
      'Решается через гибридные подходы: SSR для первой загрузки, CSR для навигации',
      'Понимание стоимости критично для выбора стратегии'
    ],
    funFact: 'Исследования показывают, что 53% пользователей покидают сайт, если загрузка занимает больше 3 секунд. CSR может увеличить время загрузки, особенно на медленных соединениях, что напрямую влияет на конверсию.',
    tags: ['frameworks', 'rendering', 'csr', 'performance', 'seo', 'basics', 'fundamentals'],
    examples: [
      {
        title: 'Пустая страница при загрузке',
        code: `// CSR: пользователь видит пустую страницу
// HTML загружен (пустой)
<div id="app"></div>

// JavaScript загружается (может быть несколько секунд)
// Пользователь видит: пустая страница

// JavaScript выполняется
// Пользователь видит: пустая страница

// Данные запрашиваются
// Пользователь видит: пустая страница

// Интерфейс отрендерен
// Пользователь видит: контент (наконец!)

// Проблема: плохой пользовательский опыт
// Решение: показывать loading spinner или использовать SSR`
      },
      {
        title: 'Time to Interactive',
        code: `// CSR: Time to Interactive (TTI)
// TTI = время до полной интерактивности

// Процесс:
// 0ms: Начало загрузки
// 100ms: HTML загружен
// 500ms: JavaScript загружен
// 800ms: JavaScript выполнен
// 1000ms: Данные запрошены
// 1200ms: Данные получены
// 1300ms: Интерфейс отрендерен
// 1500ms: Страница интерактивна (TTI)

// Проблема: 1.5 секунды до интерактивности
// На медленном соединении может быть 5+ секунд
// Пользователь не может взаимодействовать со страницей

// Решение: SSR для быстрого FCP, оптимизация JavaScript`
      },
      {
        title: 'Проблема SEO',
        code: `// CSR: проблема SEO
// Поисковик запрашивает HTML
<!DOCTYPE html>
<html>
<body>
  <div id="app"></div> <!-- Пустой -->
  <script src="app.js"></script>
</body>
</html>

// Поисковик не видит контент
// Контент рендерится через JavaScript:
function App() {
  return (
    <div>
      <h1>Важный контент</h1>
      <p>Поисковик может не увидеть это</p>
    </div>
  );
}

// Проблема: поисковик может не дождаться выполнения JavaScript
// Результат: плохое SEO, контент не индексируется

// Решение: SSR для предварительного рендеринга HTML
// Сервер рендерит HTML с контентом, поисковик видит его`
      }
    ],
    relatedTopics: ['frameworks-rendering-csr', 'frameworks-rendering-ssr'],
    isFrontendEssential: false
  }
];
