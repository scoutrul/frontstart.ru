import { Topic } from '../../../types';

export const ANGULAR_ADVANCED_TOPICS: Topic[] = [
  {
    id: 'angular-performance',
    title: 'Производительность',
    difficulty: 'advanced',
    description: 'Производительность Angular оптимизируется через: OnPush стратегию change detection (проверяет только при изменениях), pure pipes (мемоизируются автоматически), trackBy функции для *ngFor (предотвращает пересоздание элементов). Эти оптимизации критичны для больших приложений.\n\nOnPush: компоненты с OnPush проверяются только при изменении @Input() или событиях. Pure pipes: мемоизируются автоматически, пересчитываются только при изменении входных данных. trackBy: функции для *ngFor, которые определяют уникальность элементов, предотвращая пересоздание DOM элементов.\n\nИнструменты оптимизации: Angular DevTools для профилирования, webpack-bundle-analyzer для анализа бандла, Lighthouse для метрик производительности. Понимание оптимизации критично для создания производительных приложений.\n\nВ 2026 производительность Angular остаётся важной темой. OnPush стратегия стала стандартом для оптимизации. Понимание оптимизации критично для создания производительных Angular приложений.',
    keyPoints: [
      'Оптимизации: OnPush, pure pipes, trackBy',
      'OnPush: проверяет только при изменении @Input() или событиях',
      'Pure pipes: мемоизируются автоматически',
      'trackBy: предотвращает пересоздание DOM элементов',
      'OnPush стратегия стала стандартом в 2026',
      'Критично для создания производительных приложений'
    ],
    funFact: 'OnPush стратегия была добавлена в Angular 2 как способ оптимизации change detection. Идея в том, что не все компоненты нужно проверять при каждом цикле, только те, которые реально изменились. Это значительно улучшило производительность больших приложений.',
    tags: ['angular', 'performance', 'onpush', 'optimization', 'advanced'],
    examples: [
      {
        title: 'OnPush стратегия',
        code: `// OnPush: оптимизация change detection
@Component({
  selector: 'app-user',
  template: '<div>{{ user.name }}</div>',
  changeDetection: ChangeDetectionStrategy.OnPush
})
export class UserComponent {
  @Input() user!: User;
  
  // Проверяется только при:
  // - Изменении @Input()
  // - Событиях (click, input, etc)
  // - Async pipe
  // - Ручном вызове detectChanges()
}

// Преимущество: меньше проверок
// Проверяется только при реальных изменениях
// Лучшая производительность`
      },
      {
        title: 'Pure pipes',
        code: `// Pure pipes: автоматическая мемоизация
@Pipe({
  name: 'capitalize',
  pure: true // По умолчанию
})
export class CapitalizePipe implements PipeTransform {
  transform(value: string): string {
    return value.charAt(0).toUpperCase() + value.slice(1);
  }
}

// Использование:
<div>{{ name | capitalize }}</div>

// Мемоизируется автоматически
// Пересчитывается только при изменении name
// Не пересчитывается при каждом цикле

// Преимущество: автоматическая оптимизация
// Не нужно думать о мемоизации`
      },
      {
        title: 'trackBy',
        code: `// trackBy: предотвращает пересоздание элементов
@Component({
  template: \`
    <div *ngFor="let user of users; trackBy: trackByUserId">
      {{ user.name }}
    </div>
  \`
})
export class UserListComponent {
  users: User[] = [];
  
  trackByUserId(index: number, user: User): number {
    return user.id; // Уникальный идентификатор
  }
}

// Преимущество: предотвращает пересоздание DOM
// Обновляет только изменившиеся элементы
// Лучшая производительность для больших списков`
      }
    ],
    relatedTopics: ['angular-migrations', 'frameworks-performance-core-web-vitals'],
    isFrontendEssential: false
  },
  {
    id: 'angular-migrations',
    title: 'Миграции',
    difficulty: 'advanced',
    description: 'Миграции Angular — это процесс обновления между мажорными версиями (Angular 2 → 3 → 4 → ... → 17+). Angular предоставляет инструменты миграции: ng update для автоматического обновления, migration schematics для автоматического преобразования кода, руководства по миграции для ручных изменений.\n\nСтратегии миграции: постепенная миграция (обновление по модулям), полная миграция (обновление всего сразу), использование compatibility mode (временная совместимость). Выбор зависит от размера проекта и рисков.\n\nПроцесс миграции: обновление зависимостей через ng update, запуск migration schematics для автоматического преобразования, ручное исправление breaking changes, тестирование после миграции. Понимание миграций критично для работы с legacy кодом и планирования обновлений.\n\nВ 2026 миграции Angular стали более предсказуемыми благодаря инструментам миграции. Angular предоставляет migration schematics для большинства breaking changes. Понимание миграций критично для поддержки Angular проектов.',
    keyPoints: [
      'Миграции: обновление между мажорными версиями',
      'Инструменты: ng update, migration schematics, руководства',
      'Стратегии: постепенная, полная, compatibility mode',
      'Процесс: обновление зависимостей, автоматическое преобразование, ручное исправление',
      'Инструменты миграции упрощают процесс в 2026',
      'Критично для поддержки Angular проектов'
    ],
    funFact: 'Angular был одним из первых фреймворков, который предоставил автоматические инструменты миграции. ng update и migration schematics были созданы специально для упрощения обновления между версиями, что сделало миграции более предсказуемыми и менее болезненными.',
    tags: ['angular', 'migration', 'ng-update', 'schematics', 'advanced'],
    examples: [
      {
        title: 'ng update',
        code: `// ng update: автоматическое обновление
// Обновление Angular
ng update @angular/core @angular/cli

// Обновление зависимостей
ng update @angular/material

// Автоматически:
// - Обновляет package.json
// - Запускает migration schematics
// - Обновляет конфигурацию

// Преимущество: автоматизация
// Меньше ручной работы
// Меньше ошибок`
      },
      {
        title: 'Migration schematics',
        code: `// Migration schematics: автоматическое преобразование
// Запускаются автоматически при ng update
// Преобразуют код согласно breaking changes

// Пример: преобразование HttpClient
// Было:
import { Http } from '@angular/http';

// Стало:
import { HttpClient } from '@angular/common/http';

// Автоматически преобразуется
// Не нужно делать вручную

// Преимущество: автоматическое преобразование
// Меньше ручной работы
// Меньше ошибок`
      },
      {
        title: 'Процесс миграции',
        code: `// Процесс миграции:
// 1. Обновление зависимостей
ng update @angular/core @angular/cli

// 2. Автоматическое преобразование
// Migration schematics преобразуют код

// 3. Ручное исправление
// Исправить то, что не преобразовалось автоматически

// 4. Тестирование
// Проверить все функции
// Проверить производительность

// 5. Обновление документации
// Обновить README, комментарии

// Преимущество: системный подход
// Меньше рисков
// Предсказуемый процесс`
      }
    ],
    relatedTopics: ['angular-enterprise', 'frameworks-evolution-criteria'],
    isFrontendEssential: false
  },
  {
    id: 'angular-enterprise',
    title: 'Enterprise',
    difficulty: 'advanced',
    description: 'Angular в enterprise — это использование Angular для больших корпоративных проектов. Почему выбирают Angular: структура из коробки (не нужно выбирать инструменты), долгосрочная поддержка (Google поддерживает платформу), TypeScript из коробки (типобезопасность), большая экосистема (готовые решения для enterprise задач).\n\nПреимущества для enterprise: стандартизация (команды используют одинаковые инструменты), масштабируемость (структура поддерживает рост), долгосрочная поддержка (Google гарантирует поддержку), обучение (много ресурсов и курсов). Но Angular имеет стоимость: крутая кривая обучения, больше boilerplate, зависимость от платформы.\n\nИспользование в enterprise: большие команды (стандартизация важна), долгосрочные проекты (поддержка важна), сложные требования (структура помогает). Понимание Angular в enterprise контексте критично для работы в корпоративных проектах.\n\nВ 2026 Angular остаётся популярным для enterprise проектов. Структура и долгосрочная поддержка делают его привлекательным для больших компаний. Понимание enterprise контекста критично для работы в корпоративных проектах.',
    keyPoints: [
      'Angular в enterprise: большие корпоративные проекты',
      'Почему выбирают: структура, поддержка, TypeScript, экосистема',
      'Преимущества: стандартизация, масштабируемость, поддержка, обучение',
      'Стоимость: крутая кривая обучения, больше boilerplate',
      'Популярен для enterprise в 2026',
      'Критично для работы в корпоративных проектах'
    ],
    funFact: 'Angular стал особенно популярным в enterprise секторе благодаря своей структуре и долгосрочной поддержке от Google. Многие крупные компании (Google, Microsoft, IBM) используют Angular для своих внутренних и внешних проектов.',
    tags: ['angular', 'enterprise', 'corporate', 'scaling', 'advanced'],
    examples: [
      {
        title: 'Почему выбирают Angular',
        code: `// Angular для enterprise:
// 1. Структура из коробки
// - Не нужно выбирать инструменты
// - Стандартизация в команде
// - Меньше решений

// 2. Долгосрочная поддержка
// - Google поддерживает платформу
// - Регулярные обновления
// - Долгосрочная стабильность

// 3. TypeScript из коробки
// - Типобезопасность
// - Лучшая поддержка IDE
// - Меньше ошибок

// 4. Большая экосистема
// - Готовые решения для enterprise
// - Много библиотек
// - Активное сообщество

// Преимущество: полное решение
// Не нужно собирать стек самостоятельно`
      },
      {
        title: 'Преимущества для enterprise',
        code: `// Преимущества Angular для enterprise:
// 1. Стандартизация
// - Команды используют одинаковые инструменты
// - Единый подход к разработке
// - Легче онбординг

// 2. Масштабируемость
// - Структура поддерживает рост
// - Модульная архитектура
// - Легко добавлять команды

// 3. Долгосрочная поддержка
// - Google гарантирует поддержку
// - Регулярные обновления
// - Безопасность

// 4. Обучение
// - Много ресурсов
// - Официальная документация
// - Курсы и туториалы

// Результат: подходит для больших проектов
// Долгосрочная стабильность`
      },
      {
        title: 'Стоимость Angular',
        code: `// Стоимость Angular:
// 1. Крутая кривая обучения
// - Нужно изучить много концепций
// - TypeScript обязателен
// - Время онбординга: 2-3 месяца

// 2. Больше boilerplate
// - Модули, компоненты, сервисы
// - Больше кода для простых задач
// - Больше структуры

// 3. Зависимость от платформы
// - Vendor lock-in
// - Сложность миграции
// - Ограничения платформы

// Выбор: преимущества vs стоимость
// Для enterprise: преимущества важнее
// Для стартапов: стоимость может быть избыточной`
      }
    ],
    relatedTopics: ['angular-migrations', 'frameworks-evolution-business-impact'],
    isFrontendEssential: false
  }
];
