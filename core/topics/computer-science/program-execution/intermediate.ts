import { Topic } from '../../../types';

export const CS_PROGRAM_EXECUTION_INTERMEDIATE_TOPICS: Topic[] = [
  {
    id: "cs-call-stack",
    title: "Стек вызовов",
    difficulty: "intermediate",
    description: "Стек вызовов — это структура данных, которая хранит информацию о текущих выполняемых функциях. Он работает по принципу LIFO: последняя вызванная функция завершается первой.\n\nИменно стек объясняет, как работает вложенный вызов функций и почему возможны ошибки переполнения стека.",
    funFact: [
      "Stack Overflow — это реальное техническое явление, а не только сайт.",
      "Глубокая рекурсия может сломать программу."
    ],
    keyPoints: [
      "LIFO-принцип",
      "Контекст выполнения",
      "Возврат управления",
      "Ограниченность размера"
    ],
    tags: ["computer-science", "memory", "stack", "intermediate"],
    examples: [
      {
        title: "Вложенные вызовы",
        code: "function a() {\n  b();\n}\n\nfunction b() {\n  c();\n}"
      },
      {
        title: "Stack overflow",
        code: "// Бесконечная рекурсия\n// приводит к переполнению стека"
      }
    ],
    relatedTopics: ["cs-heap", "cs-execution-time"]
  },
  {
    id: "cs-heap",
    title: "Куча и память",
    difficulty: "intermediate",
    description: "Куча используется для хранения динамических данных, размер которых неизвестен заранее. В отличие от стека, память в куче управляется более сложно.\n\nБольшинство проблем с утечками памяти связано именно с неправильным управлением кучей.",
    funFact: [
      "Сборка мусора — попытка автоматизировать управление кучей.",
      "Утечки памяти возможны даже в языках с GC."
    ],
    keyPoints: [
      "Динамическое выделение памяти",
      "Долгоживущие данные",
      "Утечки памяти",
      "Garbage Collection"
    ],
    tags: ["memory", "garbage-collection", "computer-science", "intermediate"],
    examples: [
      {
        title: "Объекты в памяти",
        code: "// Объекты живут дольше функции\n// и размещаются в куче"
      },
      {
        title: "Проблема утечек",
        code: "// Ссылки удерживают память\n// даже если объект не нужен"
      }
    ],
    relatedTopics: ["cs-call-stack", "cs-execution-time"]
  },
  {
    id: "cs-execution-time",
    title: "Время выполнения",
    difficulty: "intermediate",
    description: "Время выполнения программы зависит от количества инструкций, доступа к памяти и особенностей архитектуры. Не все операции равны по стоимости.\n\nПонимание времени выполнения — основа оптимизации и анализа производительности.",
    funFact: [
      "Доступ к памяти может быть в десятки раз медленнее арифметики.",
      "Оптимизация без измерений часто ухудшает код."
    ],
    keyPoints: [
      "Стоимость операций",
      "Задержки памяти",
      "Влияние архитектуры",
      "Основа performance"
    ],
    tags: ["performance", "computer-science", "intermediate"],
    examples: [
      {
        title: "Дорогие операции",
        code: "// Доступ к памяти\n// дороже простых вычислений"
      },
      {
        title: "Почему циклы бывают медленными",
        code: "// Много инструкций\n// + память = задержки"
      }
    ],
    relatedTopics: ["cs-sync-execution"]
  },
  {
    id: "cs-sync-execution",
    title: "Синхронное выполнение",
    difficulty: "intermediate",
    description: "По своей природе процессор выполняет инструкции последовательно. Синхронная модель означает, что каждая операция блокирует следующую.\n\nАсинхронность — это надстройка, а не свойство железа.",
    funFact: [
      "CPU не знает, что такое async.",
      "Асинхронность реализуется через планирование и очереди."
    ],
    keyPoints: [
      "Последовательность выполнения",
      "Блокировка",
      "Ограничения CPU",
      "Основа для async-моделей"
    ],
    tags: ["computer-science", "execution", "intermediate"],
    examples: [
      {
        title: "Синхронный код",
        code: "// Каждая строка\n// ждёт завершения предыдущей"
      },
      {
        title: "Почему нужен async",
        code: "// Чтобы не блокировать\n// основной поток выполнения"
      }
    ],
    relatedTopics: []
  }
];
