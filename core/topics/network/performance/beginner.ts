import { Topic } from '../../../types';

export const NETWORK_PERFORMANCE_BEGINNER_TOPICS: Topic[] = [
  {
    id: 'resource-loading',
    title: 'Загрузка ресурсов',
    difficulty: 'beginner',
    description: 'Браузер загружает ресурсы страницы последовательно и параллельно в зависимости от типа. HTML парсится построчно, при обнаружении ссылок на ресурсы (CSS, JS, изображения) браузер загружает их. Блокирующие ресурсы (CSS, синхронный JS) останавливают рендеринг, неблокирующие (изображения, асинхронный JS) загружаются параллельно. Понимание процесса загрузки важно для оптимизации производительности.',
    keyPoints: [
      'HTML парсинг: браузер парсит HTML построчно, создаёт DOM-дерево.',
      'Обнаружение ресурсов: при встрече <link>, <script>, <img> браузер начинает загрузку.',
      'Блокирующие ресурсы: CSS и синхронный JavaScript блокируют рендеринг до загрузки.',
      'Неблокирующие ресурсы: изображения, асинхронный JavaScript загружаются параллельно.',
      'Порядок загрузки: HTML → CSS → JavaScript → изображения и другие ресурсы.',
      'Оптимизация: минификация, сжатие, кеширование, асинхронная загрузка скриптов.'
    ],
    tags: ['networks', 'performance', 'browser', 'loading', 'basics'],
    examples: [
      {
        title: 'Процесс загрузки страницы',
        code: `// 1. ЗАГРУЗКА HTML
// Браузер запрашивает HTML-документ
GET /index.html

// 2. ПАРСИНГ HTML
// Браузер парсит HTML построчно:
<html>
  <head>
    <link rel="stylesheet" href="/style.css"> // ← обнаружен ресурс
    <script src="/script.js"></script>        // ← обнаружен ресурс
  </head>
  <body>
    <img src="/image.jpg">                    // ← обнаружен ресурс
  </body>
</html>

// 3. ЗАГРУЗКА РЕСУРСОВ
// Браузер загружает обнаруженные ресурсы:
// - /style.css (блокирующий)
// - /script.js (блокирующий)
// - /image.jpg (неблокирующий)

// 4. РЕНДЕРИНГ
// После загрузки CSS и JS браузер рендерит страницу`
      },
      {
        title: 'Блокирующие ресурсы',
        code: `// CSS БЛОКИРУЕТ РЕНДЕРИНГ:
<link rel="stylesheet" href="/style.css">
// Браузер ждёт загрузки CSS перед рендерингом
// Причина: CSS влияет на внешний вид, нужен для правильного отображения

// СИНХРОННЫЙ JAVASCRIPT БЛОКИРУЕТ ПАРСИНГ:
<script src="/script.js"></script>
// Браузер останавливает парсинг HTML, загружает и выполняет скрипт
// Причина: скрипт может изменить DOM

// ПРОБЛЕМА:
// Если CSS или JS загружаются медленно → страница не отображается

// РЕШЕНИЕ:
// - Минифицировать и сжимать ресурсы
// - Использовать CDN
// - Кешировать ресурсы`
      },
      {
        title: 'Неблокирующие ресурсы',
        code: `// ИЗОБРАЖЕНИЯ загружаются параллельно:
<img src="/image1.jpg">
<img src="/image2.jpg">
// Не блокируют рендеринг, загружаются в фоне

// АСИНХРОННЫЙ JAVASCRIPT не блокирует парсинг:
<script src="/script.js" async></script>
// Загружается параллельно, выполняется после загрузки
// Не останавливает парсинг HTML

// ОТЛОЖЕННЫЙ JAVASCRIPT выполняется после парсинга:
<script src="/script.js" defer></script>
// Загружается параллельно, выполняется после парсинга HTML
// Сохраняет порядок выполнения

// ПРЕИМУЩЕСТВА:
// - Страница отображается быстрее
// - Ресурсы загружаются параллельно
// - Не блокируют основной поток`
      },
      {
        title: 'Водопад загрузки',
        code: `// ВОДОПАД показывает порядок загрузки:

// Время →
// HTML:     [========]
// CSS:           [====]
// JS:                [==]
// Image1:              [=]
// Image2:              [=]

// ПРОБЛЕМА: последовательная загрузка
// HTML → ждёт → CSS → ждёт → JS → ждёт → изображения

// ОПТИМИЗАЦИЯ: параллельная загрузка
// HTML:     [========]
// CSS:      [====]     (параллельно)
// JS:       [==]       (async/defer)
// Image1:   [=]        (параллельно)
// Image2:   [=]        (параллельно)

// РЕЗУЛЬТАТ: страница загружается быстрее`
      }
    ],
    relatedTopics: ['blocking-resources', 'critical-rendering-path', 'performance-prefetch'],
    isFrontendEssential: true
  },
  {
    id: 'blocking-resources',
    title: 'Блокирующие и неблокирующие ресурсы',
    difficulty: 'beginner',
    description: 'Ресурсы страницы делятся на блокирующие и неблокирующие в зависимости от влияния на рендеринг. Блокирующие ресурсы (CSS, синхронный JavaScript) останавливают парсинг или рендеринг до своей загрузки. Неблокирующие ресурсы (изображения, асинхронный JavaScript) загружаются параллельно и не влияют на отображение страницы. Понимание различий важно для оптимизации загрузки.',
    keyPoints: [
      'CSS: блокирует рендеринг, браузер ждёт загрузки перед отображением.',
      'Синхронный JavaScript: блокирует парсинг HTML, выполняется сразу после загрузки.',
      'Асинхронный JavaScript (async): не блокирует парсинг, выполняется после загрузки.',
      'Отложенный JavaScript (defer): не блокирует парсинг, выполняется после парсинга HTML.',
      'Изображения: не блокируют рендеринг, загружаются параллельно.',
      'Оптимизация: минимизировать блокирующие ресурсы, использовать async/defer для скриптов.'
    ],
    tags: ['networks', 'performance', 'browser', 'loading', 'basics'],
    examples: [
      {
        title: 'CSS блокирует рендеринг',
        code: `// БРАУЗЕР:
// 1. Парсит HTML
// 2. Встречает <link rel="stylesheet">
// 3. ОСТАНАВЛИВАЕТ рендеринг
// 4. Загружает CSS
// 5. ПРИМЕНЯЕТ стили
// 6. ПРОДОЛЖАЕТ рендеринг

// ПРИЧИНА:
// CSS влияет на внешний вид элементов
// Без CSS страница отобразится неправильно

// ПРОБЛЕМА:
// Если CSS загружается 2 секунды → страница пустая 2 секунды

// РЕШЕНИЕ:
// - Минифицировать CSS
// - Использовать inline CSS для критических стилей
// - Кешировать CSS`
      },
      {
        title: 'Синхронный JavaScript блокирует парсинг',
        code: `// БРАУЗЕР:
// 1. Парсит HTML
// 2. Встречает <script src="/app.js"></script>
// 3. ОСТАНАВЛИВАЕТ парсинг HTML
// 4. Загружает JavaScript
// 5. ВЫПОЛНЯЕТ JavaScript
// 6. ПРОДОЛЖАЕТ парсинг HTML

// ПРИЧИНА:
// JavaScript может изменить DOM
// Браузер должен выполнить скрипт перед продолжением парсинга

// ПРОБЛЕМА:
// Если JS загружается 3 секунды → парсинг остановлен 3 секунды

// РЕШЕНИЕ:
// - Использовать async или defer
// - Минифицировать JavaScript
// - Разделять на критический и некритический код`
      },
      {
        title: 'Async JavaScript',
        code: `// ASYNC: загружается параллельно, выполняется после загрузки
<script src="/analytics.js" async></script>

// ПОВЕДЕНИЕ:
// 1. Парсинг HTML продолжается
// 2. JavaScript загружается параллельно
// 3. После загрузки выполняется (может прервать парсинг)
// 4. Порядок выполнения не гарантирован

// ИСПОЛЬЗОВАНИЕ:
// - Скрипты, не зависящие от DOM
// - Аналитика, счётчики
// - Виджеты

// ПРИМЕР:
<script src="https://analytics.example.com/track.js" async></script>
// Не блокирует загрузку страницы`
      },
      {
        title: 'Defer JavaScript',
        code: `// DEFER: загружается параллельно, выполняется после парсинга HTML
<script src="/app.js" defer></script>

// ПОВЕДЕНИЕ:
// 1. Парсинг HTML продолжается
// 2. JavaScript загружается параллельно
// 3. После парсинга HTML выполняется
// 4. Порядок выполнения сохраняется

// ИСПОЛЬЗОВАНИЕ:
// - Скрипты, зависящие от DOM
// - Основной код приложения
// - Когда важен порядок выполнения

// ПРИМЕР:
<script src="/vendor.js" defer></script>
<script src="/app.js" defer></script>
// vendor.js выполнится перед app.js`
      },
      {
        title: 'Изображения не блокируют',
        code: `// ИЗОБРАЖЕНИЯ загружаются параллельно:
<img src="/hero.jpg">
<img src="/logo.png">
<img src="/banner.gif">

// ПОВЕДЕНИЕ:
// 1. Парсинг HTML продолжается
// 2. Изображения загружаются параллельно
// 3. Страница отображается сразу
// 4. Изображения появляются по мере загрузки

// ПРЕИМУЩЕСТВА:
// - Не блокируют рендеринг
// - Загружаются параллельно
// - Страница отображается быстрее

// ОПТИМИЗАЦИЯ:
// - Использовать современные форматы (WebP, AVIF)
// - Сжимать изображения
// - Использовать lazy loading`
      }
    ],
    relatedTopics: ['resource-loading', 'critical-rendering-path'],
    isFrontendEssential: true
  }
];
