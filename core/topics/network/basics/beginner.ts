import { Topic } from '../../../types';

export const NETWORK_BASICS_BEGINNER_TOPICS: Topic[] = [
  {
    id: 'client-server-model',
    title: 'Клиент-серверная модель',
    difficulty: 'beginner',
    description: 'Клиент-серверная модель — архитектура взаимодействия в сети, где клиент запрашивает ресурсы, а сервер их предоставляет. Клиент инициирует соединение и отправляет запросы, сервер обрабатывает запросы и возвращает ответы. Это основа работы веб-приложений, API и большинства сетевых протоколов.',
    keyPoints: [
      'Клиент: инициирует запросы, отправляет данные, получает ответы.',
      'Сервер: обрабатывает запросы, хранит данные, возвращает ответы.',
      'Односторонняя инициация: клиент всегда начинает взаимодействие.',
      'Множественные клиенты: один сервер может обслуживать множество клиентов.',
      'Протоколы: HTTP, FTP, SMTP работают по клиент-серверной модели.',
      'Статус: сервер может быть stateless (не хранит состояние) или stateful (хранит сессии).'
    ],
    tags: ['networks', 'architecture', 'client-server', 'basics', 'fundamentals'],
    examples: [
      {
        title: 'Пример клиент-серверного взаимодействия',
        code: `// КЛИЕНТ (браузер)
fetch('https://api.example.com/users')
  .then(response => response.json())
  .then(data => console.log(data));

// СЕРВЕР обрабатывает запрос:
// 1. Получает GET /users
// 2. Читает данные из базы
// 3. Возвращает JSON ответ

// КЛИЕНТ получает ответ и отображает данные`
      },
      {
        title: 'Клиент инициирует соединение',
        code: `// Клиент всегда начинает:
// 1. Устанавливает соединение с сервером
// 2. Отправляет HTTP-запрос
// 3. Ждёт ответа
// 4. Закрывает соединение (или переиспользует)

// Сервер пассивно ждёт запросов:
// 1. Слушает порт (например, 80 для HTTP)
// 2. Принимает запросы
// 3. Обрабатывает и отвечает`
      }
    ],
    relatedTopics: ['http-basics', 'dns-basics', 'url-navigation'],
    isFrontendEssential: true
  },
  {
    id: 'tcp-vs-udp',
    title: 'TCP vs UDP',
    difficulty: 'beginner',
    description: 'TCP и UDP — два основных транспортных протокола интернета. TCP обеспечивает надёжную доставку с подтверждением, порядком пакетов и контролем перегрузки. UDP — быстрый протокол без гарантий доставки, подходит для real-time приложений. Выбор зависит от требований к надёжности и скорости.',
    keyPoints: [
      'TCP: надёжная доставка, порядок пакетов, контроль перегрузки, установка соединения (handshake).',
      'UDP: быстрая доставка без гарантий, нет порядка, нет контроля перегрузки, без установки соединения.',
      'TCP: HTTP, HTTPS, FTP, SMTP — где важна надёжность.',
      'UDP: DNS-запросы, видеотрансляции, онлайн-игры — где важна скорость.',
      'TCP: больше overhead из-за подтверждений и контроля.',
      'UDP: меньше overhead, но возможна потеря пакетов.'
    ],
    tags: ['networks', 'protocols', 'tcp-ip', 'udp', 'transport', 'basics'],
    examples: [
      {
        title: 'TCP — надёжная доставка',
        code: `// TCP гарантирует:
// 1. Все пакеты доставлены
// 2. Пакеты в правильном порядке
// 3. Нет дубликатов
// 4. Контроль перегрузки сети

// Пример: HTTP использует TCP
// Браузер → Сервер: GET /page.html
// Сервер → Браузер: [пакет 1] [пакет 2] [пакет 3]
// Браузер подтверждает получение каждого пакета
// Если пакет потерян — сервер отправит снова`
      },
      {
        title: 'UDP — быстрая доставка',
        code: `// UDP не гарантирует:
// - Доставку пакетов
// - Порядок пакетов
// - Отсутствие дубликатов

// Пример: DNS использует UDP
// Браузер → DNS-сервер: запрос "google.com"
// DNS-сервер → Браузер: IP-адрес
// Если ответ потерян — браузер повторит запрос

// Пример: видеотрансляция использует UDP
// Пропуск кадра лучше, чем задержка всех кадров`
      },
      {
        title: 'Когда использовать TCP vs UDP',
        code: `// TCP — когда важны данные:
// - Веб-страницы (HTTP)
// - Файлы (FTP)
// - Email (SMTP)
// - API-запросы

// UDP — когда важна скорость:
// - DNS-запросы
// - Видеотрансляции
// - Онлайн-игры
// - VoIP (голосовая связь)`
      }
    ],
    relatedTopics: ['osi-model', 'http-over-tcp', 'dns-basics'],
    isFrontendEssential: true
  },
  {
    id: 'dns-basics',
    title: 'DNS',
    difficulty: 'beginner',
    description: 'DNS (Domain Name System) — система преобразования доменных имён в IP-адреса. Позволяет использовать понятные имена вместо числовых адресов. DNS работает иерархически: браузер запрашивает у DNS-сервера IP для домена, получает ответ и использует его для соединения.',
    keyPoints: [
      'Назначение: преобразование доменных имён (google.com) в IP-адреса (142.250.185.14).',
      'Иерархия: корневые серверы → TLD-серверы (.com, .ru) → авторитативные серверы домена.',
      'DNS-серверы: рекурсивные (для клиентов) и авторитативные (для доменов).',
      'Кеширование: результаты запросов сохраняются для ускорения последующих обращений.',
      'Протокол: DNS использует UDP (порт 53), редко TCP для больших ответов.',
      'Записи: A (IPv4), AAAA (IPv6), CNAME (алиас), MX (почта), TXT (текст).'
    ],
    tags: ['networks', 'dns', 'protocols', 'basics', 'fundamentals'],
    examples: [
      {
        title: 'Как работает DNS-запрос',
        code: `// 1. Пользователь вводит "google.com" в браузере
// 2. Браузер запрашивает у DNS-сервера (обычно провайдера):
//    "Какой IP у google.com?"

// 3. DNS-сервер ищет в кеше:
//    - Если есть → возвращает IP сразу
//    - Если нет → запрашивает у корневых серверов

// 4. Корневой сервер: "Спроси у .com сервера"
// 5. .com сервер: "Спроси у авторитативного сервера google.com"
// 6. Авторитативный сервер: "IP = 142.250.185.14"

// 7. DNS-сервер кеширует и возвращает IP браузеру
// 8. Браузер использует IP для соединения`
      },
      {
        title: 'DNS-запись A (IPv4)',
        code: `// Запись A связывает домен с IPv4-адресом
google.com.    A    142.250.185.14

// Когда браузер запрашивает google.com,
// DNS возвращает IP-адрес 142.250.185.14`
      },
      {
        title: 'DNS-запись CNAME (алиас)',
        code: `// CNAME создаёт алиас (псевдоним)
www.example.com.    CNAME    example.com.
example.com.       A        192.0.2.1

// www.example.com указывает на example.com
// Оба домена ведут на один IP: 192.0.2.1`
      }
    ],
    relatedTopics: ['url-navigation', 'dns-caching', 'dns-records'],
    isFrontendEssential: true
  },
  {
    id: 'url-navigation',
    title: 'Ввод URL в браузере',
    difficulty: 'beginner',
    description: 'При вводе URL браузер выполняет последовательность шагов: парсинг URL, DNS-запрос для получения IP, установка TCP-соединения, отправка HTTP-запроса, получение ответа и рендеринг страницы. Понимание этого процесса важно для диагностики проблем и оптимизации загрузки.',
    keyPoints: [
      'Парсинг URL: извлечение протокола, домена, пути, параметров.',
      'DNS-запрос: преобразование домена в IP-адрес через DNS-систему.',
      'TCP-соединение: установка соединения с сервером (3-way handshake).',
      'HTTP-запрос: отправка GET-запроса с заголовками.',
      'HTTP-ответ: получение HTML, CSS, JS и других ресурсов.',
      'Рендеринг: парсинг HTML, построение DOM, применение CSS, выполнение JS.'
    ],
    tags: ['networks', 'http', 'dns', 'browser', 'basics', 'fundamentals'],
    examples: [
      {
        title: 'Полный процесс загрузки страницы',
        code: `// 1. ПАРСИНГ URL
// Пользователь вводит: https://example.com/page?param=value
// Браузер извлекает:
//   - Протокол: https
//   - Домен: example.com
//   - Путь: /page
//   - Параметры: param=value

// 2. DNS-ЗАПРОС
// Браузер → DNS: "IP для example.com?"
// DNS → Браузер: "93.184.216.34"

// 3. TCP-СОЕДИНЕНИЕ
// Браузер устанавливает соединение с 93.184.216.34:443 (HTTPS)

// 4. TLS-РУКОПОЖАТИЕ (для HTTPS)
// Обмен сертификатами, установка шифрования

// 5. HTTP-ЗАПРОС
// GET /page?param=value HTTP/1.1
// Host: example.com
// ...

// 6. HTTP-ОТВЕТ
// HTTP/1.1 200 OK
// Content-Type: text/html
// <html>...</html>

// 7. ПАРСИНГ И РЕНДЕРИНГ
// Браузер парсит HTML, строит DOM, применяет CSS, выполняет JS`
      },
      {
        title: 'DNS-кеширование ускоряет процесс',
        code: `// ПЕРВЫЙ ЗАПРОС к example.com:
// 1. DNS-запрос (медленно, ~50-200ms)
// 2. TCP-соединение
// 3. HTTP-запрос
// 4. Ответ

// ВТОРОЙ ЗАПРОС к example.com (в течение TTL):
// 1. DNS-запрос из кеша (быстро, ~0ms)
// 2. TCP-соединение (может переиспользовать)
// 3. HTTP-запрос
// 4. Ответ`
      },
      {
        title: 'Загрузка дополнительных ресурсов',
        code: `// После получения HTML браузер находит:
// - <link rel="stylesheet" href="/style.css">
// - <script src="/script.js"></script>
// - <img src="/image.jpg">

// Для каждого ресурса повторяется процесс:
// 1. Парсинг URL (относительный → абсолютный)
// 2. Проверка кеша браузера
// 3. Если нет в кеше → DNS → TCP → HTTP → Ответ`
      }
    ],
    relatedTopics: ['dns-basics', 'http-basics', 'http-caching', 'critical-rendering-path'],
    isFrontendEssential: true
  }
];
